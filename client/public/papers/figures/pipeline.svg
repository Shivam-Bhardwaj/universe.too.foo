<svg width="800" height="300" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .box { fill: #f0f0f0; stroke: #667eea; stroke-width: 2; }
      .arrow { stroke: #667eea; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .label { font-family: sans-serif; font-size: 14px; fill: #333; text-anchor: middle; }
      .title { font-family: sans-serif; font-size: 16px; font-weight: bold; fill: #333; text-anchor: middle; }
      .subtitle { font-family: sans-serif; font-size: 11px; fill: #666; text-anchor: middle; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#667eea" />
    </marker>
  </defs>

  <text x="400" y="25" class="title">HELIOS Data Pipeline</text>

  <!-- Data Sources -->
  <rect x="20" y="60" width="120" height="60" rx="5" class="box"/>
  <text x="80" y="85" class="label">Catalog</text>
  <text x="80" y="105" class="subtitle">(MPCORB/Gaia)</text>

  <!-- Arrow 1 -->
  <path d="M 140 90 L 180 90" class="arrow"/>

  <!-- HLG Partitioning -->
  <rect x="180" y="60" width="120" height="60" rx="5" class="box"/>
  <text x="240" y="85" class="label">HLG Grid</text>
  <text x="240" y="105" class="subtitle">(Spatial partition)</text>

  <!-- Arrow 2 -->
  <path d="M 300 90 L 340 90" class="arrow"/>

  <!-- Initial Splats -->
  <rect x="340" y="60" width="120" height="60" rx="5" class="box"/>
  <text x="400" y="85" class="label">Init Splats</text>
  <text x="400" y="105" class="subtitle">(Per-cell bins)</text>

  <!-- Arrow 3 -->
  <path d="M 460 90 L 500 90" class="arrow"/>

  <!-- Training -->
  <rect x="500" y="60" width="120" height="60" rx="5" class="box"/>
  <text x="560" y="85" class="label">Training</text>
  <text x="560" y="105" class="subtitle">(Diff. rasterizer)</text>

  <!-- Arrow 4 -->
  <path d="M 620 90 L 660 90" class="arrow"/>

  <!-- Trained Dataset -->
  <rect x="660" y="60" width="120" height="60" rx="5" class="box"/>
  <text x="720" y="85" class="label">Trained</text>
  <text x="720" y="105" class="subtitle">(Optimized splats)</text>

  <!-- Ground Truth Loop -->
  <rect x="340" y="160" width="120" height="60" rx="5" class="box" style="fill: #ffe0e0"/>
  <text x="400" y="185" class="label">Ground Truth</text>
  <text x="400" y="205" class="subtitle">(Reference)</text>

  <path d="M 460 190 L 500 120" class="arrow" style="stroke-dasharray: 5,5"/>

  <!-- Output -->
  <text x="720" y="260" class="subtitle">WebGPU Client â†’</text>
  <text x="720" y="280" class="subtitle">Real-time rendering</text>
</svg>
